{"ast":null,"code":"import _toConsumableArray from\"/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Grid}from'@material-ui/core';import React,{Component}from'react';import reactDom from'react-dom';import Calc from'./Calc-comps/Calc';import Screen from'./Calc-comps/Screen';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var componentName=/*#__PURE__*/function(_Component){_inherits(componentName,_Component);var _super=_createSuper(componentName);function componentName(){var _this;_classCallCheck(this,componentName);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentCalculation:0,term:'',history:JSON.parse(localStorage.getItem('CalcHistory'))||[]};_this.calculate=function(equation){//test\n//4-5•6÷9•9+4•6÷5•9+563•7÷6÷6++1--2+-3-+4\n/*\n\t\tSort out the string from input to:\n\t\t\tSplit based on the signs (+-•÷) --> makes sure that numbers in sequence like 444 is retained as a number (split and filter)\n\t\t\tThen check for + - signs in sequence such as --+ which as works to differeciate negative, positive numbers\n\t\t\tThe final result is an array that contains numbers (0-9) and strings (\"+-•÷\")\n\t\t\tReverse the array so we can apply pemdas to it\n\t*/var calc=equation.split(/(•|÷|\\+|-)/).filter(function(c,i){return c!=='';}).flatMap(function(c,i,arr){if(c==='-'){if(arr[i+1]==='+'){arr[i+1]='-';return[];}else if(arr[i+1]==='-'){arr[i+1]='+';return[];}}else if(c==='+'){if(arr[i+1]==='-'){arr[i+1]='-';return[];}else if(arr[i+1]==='+'){arr[i+1]='+';return[];}}return parseInt(c)||c;}).reverse();//Order of operations: multiplication and divison\nfor(var i=calc.length-1;i>=0;i--){if(calc[i+1]&&calc[i-1]){if(calc[i]==='•'){calc[i-1]=calc[i+1]*calc[i-1];calc.splice(i+1,1);calc.splice(i,1);}else if(calc[i]==='÷'){calc[i-1]=calc[i+1]/calc[i-1];calc.splice(i+1,1);calc.splice(i,1);}}}calc=calc.reverse();//Order of operations: addition and subtraction\nvar finalCalc=calc.reduce(function(a,c,i,arr){if(typeof arr[i-1]==='string')return a;if(c==='-'){return a-arr[i+1];}else if(c==='+'){return arr[i+1]+a;}else{return a+c;}},0);_this.setState({currentCalculation:Math.round(finalCalc*100)/100});};_this.addToHistory=function(){if(!isNaN(_this.state.currentCalculation)&&_this.state.term!==''){var newHistory=[].concat(_toConsumableArray(_this.state.history),[{equation:_this.state.currentCalculation,answer:_this.state.term}]);_this.setState({history:newHistory,currentCalculation:0,term:''});localStorage.setItem('CalcHistory',JSON.stringify(newHistory));}};_this.checkKeys=function(term){return term.split('').map(function(c,i){if(c==='*')return'•';if(c==='/')return'÷';return c;}).filter(function(c,i){return!(i===0&&/(•|÷|\\+)/.test(c));}).join('');};_this.finalCheck=function(term){return /^([•÷0-9+-])+$/.test(term);};_this.changeInput=function(term){var t=_this.checkKeys(term);if(_this.finalCheck(t))_this.setState({term:t});if(t.length<1)_this.setState({term:''});_this.calculate(t);};_this.buttonClick=function(button){if(_this.finalCheck(button)){var newTerm=_this.state.term+button;_this.setState({term:newTerm});_this.calculate(newTerm);}};_this.focus=function(re){reactDom.findDOMNode(re).focus();};return _this;}_createClass(componentName,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Grid,{sm:10,md:8,lg:6,xl:4,direction:\"column\",justify:\"center\",alignItems:\"flex-start\",item:true,className:\"main-cont\",container:true,children:[/*#__PURE__*/_jsx(Screen,{focus:this.focus,term:this.state.term,changeInput:this.changeInput,calculate:this.calculate,currentCalculation:this.state.currentCalculation,buttonClick:this.buttonClick,history:this.state.history,submit:this.addToHistory}),/*#__PURE__*/_jsx(Calc,{buttonClick:this.buttonClick,term:this.state.term,submit:this.addToHistory})]});}}]);return componentName;}(Component);export{componentName as default};","map":{"version":3,"sources":["/Users/razbasnet/Documents/react/GitHub/react/calculator-react-app/src/Components/Calculator.js"],"names":["Grid","React","Component","reactDom","Calc","Screen","componentName","state","currentCalculation","term","history","JSON","parse","localStorage","getItem","calculate","equation","calc","split","filter","c","i","flatMap","arr","parseInt","reverse","length","splice","finalCalc","reduce","a","setState","Math","round","addToHistory","isNaN","newHistory","answer","setItem","stringify","checkKeys","map","test","join","finalCheck","changeInput","t","buttonClick","button","newTerm","focus","re","findDOMNode"],"mappings":"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","sourcesContent":["import { Grid } from '@material-ui/core';\nimport React, { Component } from 'react';\nimport reactDom from 'react-dom';\nimport Calc from './Calc-comps/Calc';\nimport Screen from './Calc-comps/Screen';\n\nexport default class componentName extends Component {\n\tstate = {\n\t\tcurrentCalculation: 0,\n\t\tterm: '',\n\t\thistory: JSON.parse(localStorage.getItem('CalcHistory')) || [],\n\t};\n\n\t//Calculate Input\n\tcalculate = (equation) => {\n\t\t//test\n\t\t//4-5•6÷9•9+4•6÷5•9+563•7÷6÷6++1--2+-3-+4\n\n\t\t/*\n\t\tSort out the string from input to:\n\t\t\tSplit based on the signs (+-•÷) --> makes sure that numbers in sequence like 444 is retained as a number (split and filter)\n\t\t\tThen check for + - signs in sequence such as --+ which as works to differeciate negative, positive numbers\n\t\t\tThe final result is an array that contains numbers (0-9) and strings (\"+-•÷\")\n\t\t\tReverse the array so we can apply pemdas to it\n\t*/\n\n\t\tlet calc = equation\n\t\t\t.split(/(•|÷|\\+|-)/)\n\t\t\t.filter((c, i) => c !== '')\n\t\t\t.flatMap((c, i, arr) => {\n\t\t\t\tif (c === '-') {\n\t\t\t\t\tif (arr[i + 1] === '+') {\n\t\t\t\t\t\tarr[i + 1] = '-';\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t} else if (arr[i + 1] === '-') {\n\t\t\t\t\t\tarr[i + 1] = '+';\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '+') {\n\t\t\t\t\tif (arr[i + 1] === '-') {\n\t\t\t\t\t\tarr[i + 1] = '-';\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t} else if (arr[i + 1] === '+') {\n\t\t\t\t\t\tarr[i + 1] = '+';\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn parseInt(c) || c;\n\t\t\t})\n\t\t\t.reverse();\n\t\t//Order of operations: multiplication and divison\n\t\tfor (let i = calc.length - 1; i >= 0; i--) {\n\t\t\tif (calc[i + 1] && calc[i - 1]) {\n\t\t\t\tif (calc[i] === '•') {\n\t\t\t\t\tcalc[i - 1] = calc[i + 1] * calc[i - 1];\n\t\t\t\t\tcalc.splice(i + 1, 1);\n\t\t\t\t\tcalc.splice(i, 1);\n\t\t\t\t} else if (calc[i] === '÷') {\n\t\t\t\t\tcalc[i - 1] = calc[i + 1] / calc[i - 1];\n\t\t\t\t\tcalc.splice(i + 1, 1);\n\t\t\t\t\tcalc.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcalc = calc.reverse();\n\t\t//Order of operations: addition and subtraction\n\t\tconst finalCalc = calc.reduce((a, c, i, arr) => {\n\t\t\tif (typeof arr[i - 1] === 'string') return a;\n\t\t\tif (c === '-') {\n\t\t\t\treturn a - arr[i + 1];\n\t\t\t} else if (c === '+') {\n\t\t\t\treturn arr[i + 1] + a;\n\t\t\t} else {\n\t\t\t\treturn a + c;\n\t\t\t}\n\t\t}, 0);\n\t\tthis.setState({ currentCalculation: Math.round(finalCalc * 100) / 100 });\n\t};\n\n\t//changes the history state and adds to local storage\n\taddToHistory = () => {\n\t\tif (!isNaN(this.state.currentCalculation) && this.state.term !== '') {\n\t\t\tconst newHistory = [\n\t\t\t\t...this.state.history,\n\t\t\t\t{ equation: this.state.currentCalculation, answer: this.state.term },\n\t\t\t];\n\t\t\tthis.setState({\n\t\t\t\thistory: newHistory,\n\t\t\t\tcurrentCalculation: 0,\n\t\t\t\tterm: '',\n\t\t\t});\n\t\t\tlocalStorage.setItem('CalcHistory', JSON.stringify(newHistory));\n\t\t}\n\t};\n\n\t//Check input\n\tcheckKeys = (term) =>\n\t\tterm\n\t\t\t.split('')\n\t\t\t.map((c, i) => {\n\t\t\t\tif (c === '*') return '•';\n\t\t\t\tif (c === '/') return '÷';\n\t\t\t\treturn c;\n\t\t\t})\n\t\t\t.filter((c, i) => !(i === 0 && /(•|÷|\\+)/.test(c)))\n\t\t\t.join('');\n\n\tfinalCheck = (term) => /^([•÷0-9+-])+$/.test(term);\n\t//Changes term (input) in state\n\tchangeInput = (term) => {\n\t\tlet t = this.checkKeys(term);\n\n\t\tif (this.finalCheck(t)) this.setState({ term: t });\n\t\tif (t.length < 1) this.setState({ term: '' });\n\t\tthis.calculate(t);\n\t};\n\t//Adds input when button clicked\n\tbuttonClick = (button) => {\n\t\tif (this.finalCheck(button)) {\n\t\t\tconst newTerm = this.state.term + button;\n\t\t\tthis.setState({ term: newTerm });\n\t\t\tthis.calculate(newTerm);\n\t\t}\n\t};\n\t//makes sure input is always focused when interacting\n\tfocus = (re) => {\n\t\treactDom.findDOMNode(re).focus();\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Grid\n\t\t\t\tsm={10}\n\t\t\t\tmd={8}\n\t\t\t\tlg={6}\n\t\t\t\txl={4}\n\t\t\t\tdirection=\"column\"\n\t\t\t\tjustify=\"center\"\n\t\t\t\talignItems=\"flex-start\"\n\t\t\t\titem\n\t\t\t\tclassName=\"main-cont\"\n\t\t\t\tcontainer\n\t\t\t>\n\t\t\t\t<Screen\n\t\t\t\t\tfocus={this.focus}\n\t\t\t\t\tterm={this.state.term}\n\t\t\t\t\tchangeInput={this.changeInput}\n\t\t\t\t\tcalculate={this.calculate}\n\t\t\t\t\tcurrentCalculation={this.state.currentCalculation}\n\t\t\t\t\tbuttonClick={this.buttonClick}\n\t\t\t\t\thistory={this.state.history}\n\t\t\t\t\tsubmit={this.addToHistory}\n\t\t\t\t/>\n\t\t\t\t<Calc\n\t\t\t\t\tbuttonClick={this.buttonClick}\n\t\t\t\t\tterm={this.state.term}\n\t\t\t\t\tsubmit={this.addToHistory}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}